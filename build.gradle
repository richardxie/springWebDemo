/*
 * This build file was auto generated by running the Gradle 'init' task
 * by '强' at '15-10-30 下午5:00' with Gradle 2.6
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.6/userguide/tutorial_java_projects.html
 */

buildscript {

    ext {
        springBootVersion = '1.2.5.RELEASE'
        springLoadedVersion = '1.2.0.RELEASE'

    }
	repositories {
		jcenter()
	}
    
    dependencies { 	
    	classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    	classpath 'com.moowork.gradle:gradle-grunt-plugin:0.11'
      classpath "com.moowork.gradle:gradle-node-plugin:0.11"
	}
}

// Apply the java plugin to add support for Java
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'
apply plugin: 'spring-boot'
apply plugin: 'com.moowork.node'
apply plugin: 'com.moowork.grunt'

sourceCompatibility = 1.8
targetCompatibility = 1.8

// In this section you declare where to find the dependencies of your project
repositories {
    // Use 'jcenter' for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

// In this section you declare the dependencies for your production and test code
dependencies {
   compile("org.springframework.boot:spring-boot-starter-web")
   compile("org.springframework.boot:spring-boot-starter-actuator")
   compile("org.springframework.boot:spring-boot-starter-security")
   compile("org.springframework.boot:spring-boot-starter-data-jpa")
   compile("org.springframework.boot:spring-boot-starter-data-rest")
   compile("org.springframework.boot:spring-boot-starter-thymeleaf")
   testCompile("org.springframework.boot:spring-boot-starter-test")
   testCompile("org.apache.httpcomponents:httpclient")
   //lombok
	compile "org.projectlombok:lombok:1.14.8"
	 //guava
	compile "com.google.guava:guava:17.0"
	compile  'io.reactivex:rxjava:1.0.2'
	compile "org.thymeleaf.extras:thymeleaf-extras-springsecurity4:2.1.2.RELEASE"
	//compile("net.sourceforge.nekohtml:nekohtml:1.9.21")

  runtime("com.h2database:h2")
}

node {
  // Version of node to use.
  version = '5.4.1'

  // Version of npm to use.
  npmVersion = '3.3.12'

  // Base URL for fetching node distributions (change if you have a mirror).
  distBaseUrl = 'https://nodejs.org/dist'

  // If true, it will download node using above parameters.
  // If false, it will try to use globally installed node.
  download = true

  // Set the work directory for unpacking node
  workDir = file("${project.buildDir}/nodejs")

  // Set the work directory where node_modules should be located
  nodeModulesDir = file("${project.projectDir}")
}
grunt {
    // Set the directory where Gruntfile.js should be found
    workDir = file("${project.projectDir}")

    // Whether colors should output on the terminal
    colors = true

    // Whether output from Grunt should be buffered - useful when running tasks in parallel
    bufferOutput = false
    
    
}
// runs "grunt build" as part of your gradle build
build.dependsOn grunt_release

// makes sure on each build that grunt is installed
grunt_release.dependsOn 'installGrunt'

// processes your package.json before running grunt build
grunt_release.dependsOn 'npmInstall'
